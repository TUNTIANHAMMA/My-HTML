<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>函数的进阶用法</title>
</head>
<body>
    <script>
        // 复习  
        // 作用域
        // 函数的作用域是指函数内部可以访问的变量和对象的范围。函数的作用域分为全局作用域和局部作用域。
        // -----------------------------------------------------------------------------------------------------

        // 变量
        // 局部变量：在函数内部定义的变量，只能在函数内部访问。  全局变量：在函数外部定义的变量，可以在函数内部和外部访问。
        function test_01() {
            var a = "班长的同学"; // 局部变量
            console.log(a); // 打印局部变量
        }
        test_01();
        // console.log(a); // 函数外部打印局部变量，报错：Uncaught ReferenceError: a is not defined
        // -----------------------------------------------------------------------------------------------------


        // 全局变量：在函数外部定义的变量，可以在函数内部和外部访问。   
        var a = "班长"; // 全局变量
        function test_02() {
            var b = "班长的同学"; // 局部变量
            console.log(a); // 打印全局变量
        }
        test_02();
        console.log(a); // 打印全局变量
        // console.log(b); // 打印局部变量，报错：Uncaught ReferenceError: b is not defined
        // -----------------------------------------------------------------------------------------------------

        // 作用域链：作用域链是指在函数内部访问变量时，首先在函数内部查找，如果没有找到，就会向外层作用域查找，直到找到为止。
        // 作用域链是由多个作用域组成的，每个作用域都有一个指向外层作用域的指针。
        // 当函数被调用时，JavaScript 引擎会创建一个新的作用域，并将其添加到作用域链的顶部。
        // 当函数执行完毕后，作用域会被销毁，作用域链的指针会指向下一个作用域。
        // 示例
        var a01 = "班长"; // 全局变量
        function test_03() {
            var b = "班长的同学"; // 局部变量
            function test_04() {
                var c = "班长的同学的同学"; // 局部变量
                console.log(a01); // 打印全局变量
                console.log(b); // 打印局部变量
                console.log(c); // 打印局部变量
            }
            test_04();
        }
        test_03();
        // console.log(a); // 打印全局变量

        // -----------------------------------------------------------------------------------------------------
        // 闭包：闭包是指一个函数可以访问其外部作用域的变量，即使外部函数已经执行完毕。闭包可以用来实现私有变量和私有方法。
        // 闭包是由函数和函数的作用域组成的。闭包可以用来实现私有变量和私有方法。
        // 闭包是一个函数，可以访问其外部作用域的变量，即使外部函数已经执行完毕。
        // 闭包可以用来实现私有变量和私有方法。
        // 示例
        function greeting() {
            var name = "小智"
            function sayHello() {
                console.log("Hello " + name); // 打印闭包变量
            }
            sayHello; // 调用闭包函数
        }
        greeting(); // 打印闭包变量

        // 利用闭包可以实现函数外部访问函数内部的变量或修改函数内部变量，即使外部函数已经执行完毕。
        function greetting() {
            var name = "小智"
            return [function() {
                return name; // 返回闭包变量
            },
            function(newname) {
                return name = newname; // 修改闭包变量
            }];
        }
        var [getName, setName] = greetting(); // 解构赋值
        console.log("你好" + getName()); // 打印闭包变量
        setName("小明"); // 修改闭包变量
        console.log("你好" + getName()); // 打印闭包变量
        // 闭包作用 所有语言中的闭包都是一种特殊的对象，闭包可以用来 1. 封装私有变量 2. 避免全局变量污染 3. 实现数据封装 4. 实现数据持久化 5. 实现返回值，函数赋值，函数参数和IIFE（立即执行函数表达式）
        // -----------------------------------------------------------------------------------------------------
        // 
    </script>
</body>
</html>